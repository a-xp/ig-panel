(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/ig-panel/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"009a":function(t,e,n){},"034f":function(t,e,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},1203:function(t,e,n){"use strict";var r=n("ace1"),o=n.n(r);o.a},1318:function(t,e,n){"use strict";var r=n("e5bb"),o=n.n(r);o.a},"173f":function(t,e,n){"use strict";var r=n("6965"),o=n.n(r);o.a},"2c81":function(t,e,n){"use strict";var r=n("f265"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],a={name:"App",components:{}},s=a,c=(n("034f"),n("2877")),l=Object(c["a"])(s,o,i,!1,null,null,null),u=l.exports,d=(n("e008"),n("8c4f")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"card login-card"},[n("h5",{staticClass:"card-header text-center"},[t._v(" Вход в приложение ")]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"login"}},[t._v("Логин")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",class:{"is-invalid":t.errors.login},attrs:{type:"text",id:"login",autocomplete:"off"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),t.errors.login?n("small",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.login))]):t._e()]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"pass"}},[t._v("Пароль")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticClass:"form-control",class:{"is-invalid":t.errors.pass},attrs:{type:"password",id:"pass"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),t.errors.pass?n("small",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.pass))]):t._e()]),n("div",{staticClass:"col-auto text-center"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.login.length||!t.pass.length},on:{click:t.doLogin}},[t._v("Войти")])])]),n("div",{staticClass:"card-footer footer"},[n("router-link",{attrs:{to:"/"}},[n("small",[t._v("Зарегистрироваться")])]),n("router-link",{attrs:{to:"/"}},[n("small",[t._v("Восстановить доступ")])])],1)])])},m=[],f=(n("96cf"),n("1da1")),h="LOGIN_INCORRECT",g="PASSWORD_INVALID",b="ENTITY_NOT_FOUND",v="TOKEN_INVALID",_={LOGIN_INVALID:h,PASSWORD_INVALID:g,ENTITY_NOT_FOUND:b,TOKEN_INVALID:v},y=_,C=(n("d3b7"),"/ig-panel/"),P={total:124,size:6,page:0,items:[{id:1,name:"@account123",subscriptionActive:!1,subscriptionTo:"2020-08-30"},{id:2,name:"@accounttest721",subscriptionActive:!0,subscriptionTo:"2020-08-30"},{id:3,name:"@account8567576",subscriptionActive:!0,subscriptionTo:"2020-08-30"},{id:4,name:"@account23423",subscriptionActive:!0,subscriptionTo:"2020-08-30"},{id:5,name:"@account992874",subscriptionActive:!1,subscriptionTo:"2020-08-30"},{id:6,name:"@accountfdsrtfs",subscriptionActive:!0,subscriptionTo:"2020-08-30"}]},k={id:1,name:"@someaccount435",postDepth:20,likePoints:3,commentPoints:5,commentMinLength:10,maxCommentsFromUser:5,commentReplyPoints:1,commentReplyMinLength:10,maxCommentRepliesFromUser:10,commentLikePoints:1,onlySubscribers:!0,deepReplySubscriberPoints:10,deepReplyNonSubscriberPoints:5,maxDeepRepliesFromUser:3,deepLikeSubscriberPoints:10,deepLikeNonSubscriberPoints:3,subscriptionActive:!0,subscriptionTo:"2020-10-30",processingActive:!0,showActionCount:!0},x={id:1,name:"@someaccount34234",total:283,page:0,size:10,users:[{pos:1,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:2,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:3,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:4,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:5,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:6,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:7,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:8,login:"@someuser676",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:9,login:"@someuser546",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530},{pos:10,login:"@someuser54645",commentPoints:48,likePoints:40,otherPoints:230,manualPoints:30,total:530}]},w={id:1,banner:"".concat(C,"image.png"),code:"brd-2344",background:"#7E5446",title:"Лидерборд\n@accountname",url:"".concat(C,"#/brd-2344")};function O(t){return R.apply(this,arguments)}function R(){return R=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}var S={boards:P,boardConfig:k,boardStats:x,delay:O,boardStyle:w,BASE:C},j="token",A={logged:!1,token:null};function $(){localStorage.removeItem(j)}function B(){return A.logged}function L(){return N.apply(this,arguments)}function N(){return N=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!A.logged){t.next=2;break}return t.abrupt("return",!0);case 2:if(!localStorage.getItem(j)){t.next=8;break}return t.next=5,S.delay(1e3);case 5:return t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)}))),N.apply(this,arguments)}function T(t,e){return E.apply(this,arguments)}function E(){return E=Object(f["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("1"===n){t.next=2;break}throw new Error(y.PASSWORD_INVALID);case 2:return t.next=4,S.delay(1e3);case 4:return localStorage.setItem(j,"OK"),A={logged:!0,token:"111",login:e,isAdmin:"admin"===e},t.abrupt("return",A);case 7:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}var I={isLogged:B,logIn:T,tryLogin:L,logout:$},M=I,D={name:"Login",data:function(){return{errors:{},login:"",pass:"1",loading:!1}},methods:{doLogin:function(){var t=this;this.errors={},this.loading=!0,M.logIn(this.login,this.pass).then((function(e){e.isAdmin?t.$router.push("/admin/users"):t.$router.push("/cp/boards")})).catch((function(e){switch(t.loading=!1,e.message){case y.PASSWORD_INVALID:t.errors={pass:"Некорректный пароль"};break;case y.LOGIN_INVALID:t.errors={login:"Некорректный логин"};break;default:t.errors={internal:"Произошла ошибка. Повторите попытку позже"}}}))}}},F=D,V=(n("bfa6"),Object(c["a"])(F,p,m,!1,null,"72ad8d22",null)),U=V.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row header"},[n("h1",[t._v("Лидерборды - супер!")]),n("button",{staticClass:"btn btn-primary",on:{click:t.create}},[t._v("Создать лидерборд")])]),t.loading?n("p",{staticClass:"text-center"},[t._v("Загрузка...")]):t._e(),t.error?n("p",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),n("div",{staticClass:"row"},t._l(t.items,(function(e){return n("div",{key:e.id,staticClass:"col-md-6 cell"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h5",[t._v(t._s(e.name))]),e.subscriptionActive?n("p",{staticClass:"text-muted"},[t._v("Оплачен до "+t._s(e.subscriptionTo))]):t._e(),e.subscriptionActive?t._e():n("p",{staticClass:"text-danger"},[n("strong",[t._v("Не оплачен")])]),n("div",{staticClass:"btn-line"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.configure(e.id)}}},[t._v("Настроить")]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.pay(e.id)}}},[t._v("Оплатить")])]),n("div",{staticClass:"btn-line"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.remove(e.id)}}},[t._v("Удалить")]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.open(e.id)}}},[t._v("Открыть")])])])])])})),0),n("Pagination",{attrs:{"cur-page":t.page,"num-pages":t.numPages,handler:t.loadPage,total:t.total}}),n("p",{staticClass:"text-center m-0"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:t.logout}},[n("small",[t._v("Выход из приложения")])])])],1)},K=[],G=(n("9911"),n("99af"),n("5530"));function W(){return Y.apply(this,arguments)}function Y(){return Y=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",S.delay(300));case 1:case"end":return t.stop()}}),t)}))),Y.apply(this,arguments)}function z(t){return J.apply(this,arguments)}function J(){return J=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:return t.abrupt("return",Object(G["a"])(Object(G["a"])({},S.boards),{},{page:e}));case 3:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function H(t){return Q.apply(this,arguments)}function Q(){return Q=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:return t.abrupt("return",Object(G["a"])(Object(G["a"])({},S.boardConfig),{},{id:e}));case 3:case"end":return t.stop()}}),t)}))),Q.apply(this,arguments)}function X(t){return Z.apply(this,arguments)}function Z(){return Z=Object(f["a"])(regeneratorRuntime.mark((function t(e){var n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:0,r.length>2&&void 0!==r[2]?r[2]:"",t.next=4,W();case 4:return t.abrupt("return",Object(G["a"])(Object(G["a"])({},S.boardStats),{},{id:e,page:n}));case 5:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}function tt(t){return et.apply(this,arguments)}function et(){return et=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Reset manual points for ".concat(e)),t.next=3,W();case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)}))),et.apply(this,arguments)}function nt(t){return rt.apply(this,arguments)}function rt(){return rt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Delete board ".concat(e)),t.next=3,W();case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)}))),rt.apply(this,arguments)}function ot(t){return it.apply(this,arguments)}function it(){return it=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Get payment link"),t.next=3,W();case 3:return t.abrupt("return",{link:"".concat(S.BASE,"payment.html?id=").concat(e)});case 4:case"end":return t.stop()}}),t)}))),it.apply(this,arguments)}function at(t,e,n){return st.apply(this,arguments)}function st(){return st=Object(f["a"])(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Changing bonus points on board ".concat(e," for ").concat(n," by ").concat(r)),t.next=3,W();case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)}))),st.apply(this,arguments)}function ct(t){return lt.apply(this,arguments)}function lt(){return lt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Stored board",e),t.next=3,W();case 3:return t.abrupt("return",Object(G["a"])(Object(G["a"])({},e),{},{id:e.id||1}));case 4:case"end":return t.stop()}}),t)}))),lt.apply(this,arguments)}function ut(t,e){return dt.apply(this,arguments)}function dt(){return dt=Object(f["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Stored board style",n),t.next=3,W();case 3:return t.abrupt("return",Object(G["a"])(Object(G["a"])({},S.boardStyle),n));case 4:case"end":return t.stop()}}),t)}))),dt.apply(this,arguments)}function pt(t){return mt.apply(this,arguments)}function mt(){return mt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:return t.abrupt("return",Object(G["a"])(Object(G["a"])({},S.boardStyle),{},{id:e}));case 3:case"end":return t.stop()}}),t)}))),mt.apply(this,arguments)}function ft(t){return ht.apply(this,arguments)}function ht(){return ht=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:return t.abrupt("return",S.boardStyle);case 3:case"end":return t.stop()}}),t)}))),ht.apply(this,arguments)}function gt(t){return bt.apply(this,arguments)}function bt(){return bt=Object(f["a"])(regeneratorRuntime.mark((function t(e){var n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:"",n=r.length>2&&void 0!==r[2]?r[2]:0,t.next=4,W();case 4:return t.abrupt("return",Object(G["a"])(Object(G["a"])({},S.boardStats),{},{page:n}));case 5:case"end":return t.stop()}}),t)}))),bt.apply(this,arguments)}var vt={getBoards:z,getBoardConfig:H,getBoardStats:X,storeBoard:ct,resetManualPoints:tt,deleteBoard:nt,getPaymentLink:ot,storeBoardStyle:ut,getBoardStyle:pt,getPublicStat:gt,getPublicStyle:ft,changeBonus:at},_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[t.options.length>1?n("ul",{staticClass:"pagination pagination-sm"},[0!==t.curPage?n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)","aria-label":"Previous"},on:{click:function(e){return t.handler(t.curPage-1)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]):t._e(),t._l(t.options,(function(e){return n("li",{key:e,staticClass:"page-item",class:{active:e===t.curPage}},[e!==t.curPage?n("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.handler(e)}}},[t._v(t._s(e+1))]):t._e(),e===t.curPage?n("span",{staticClass:"page-link"},[t._v(t._s(e+1))]):t._e()])})),t.curPage!==t.numPages-1?n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:"javascript:void(0)","aria-label":"Next"},on:{click:function(e){return t.handler(t.curPage+1)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])]):t._e()],2):t._e(),n("p",[t._v("Всего: "+t._s(t.total))])])},yt=[],Ct=(n("caad"),2),Pt=2,kt=1;function xt(t,e){var n=[];if(t>1){if(e>Pt)for(var r=0;r<Ct&&r<t;r++)n.push(r);for(var o=Math.max(e-Pt,0);o<=Math.min(e+Pt,t-1);o++)n.includes(o)||n.push(o);if(e<t-Pt)for(var i=t-kt;i<t;i++)n.includes(i)||n.push(i)}return n}var wt={name:"Pagination",props:["numPages","curPage","handler","total"],data:function(){return{options:xt(this.numPages,this.curPage)}},watch:{numPages:function(t,e){this.options=xt(t,this.curPage)},curPage:function(t,e){this.options=xt(this.numPages,t)}}},Ot=wt,Rt=(n("173f"),Object(c["a"])(Ot,_t,yt,!1,null,"191145d2",null)),St=Rt.exports,jt={methods:{handleResponse:function(t){var e=this;return this.error=null,this.loading=!0,t().catch((function(t){switch(t.message){case y.TOKEN_INVALID:e.$router.push("/login");break;case y.ENTITY_NOT_FOUND:e.$router.push("/cp/boards");break;default:e.error="Произошла ошибка. Повторите запрос позже"}return null})).finally((function(){e.loading=!1}))}}},At=6,$t={name:"Boards",components:{Pagination:St},mixins:[jt],data:function(){return{items:[],loading:!0,error:!1,page:0,numPages:0,total:0}},created:function(){this.loadPage(0)},methods:{loadPage:function(t){var e=this;this.loading=!0,this.error=null,this.handleResponse((function(){return vt.getBoards(t)})).then((function(t){e.items=t.items,e.page=t.page,e.total=t.total,e.numPages=Math.ceil(t.total/At)}))},configure:function(t){this.$router.push("/cp/boards/".concat(t,"/config"))},open:function(t){this.$router.push("/cp/boards/".concat(t))},pay:function(t){this.handleResponse((function(){return vt.getPaymentLink(t)})).then((function(t){var e=t.link;e&&open(e,null,"status=no,menubar=no,toolbar=no,location=no,noopener")}))},remove:function(t){var e=this;this.handleResponse((function(){return vt.deleteBoard(t)})).then((function(){return e.loadPage(e.page)}))},create:function(){this.$router.push("/cp/boards/new/config")},logout:function(){M.logout(),this.$router.push("/")}}},Bt=$t,Lt=(n("e0ed"),Object(c["a"])(Bt,q,K,!1,null,"1e2f169a",null)),Nt=Lt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root",style:{backgroundColor:t.style.background||"#C4D3DC"}},[n("div",{staticClass:"banner",style:{backgroundImage:t.style.banner&&"url("+t.style.banner+")"}},[t.style.title?n("p",{staticClass:"title"},[t._v(t._s(t.style.title))]):t._e(),n("div",{staticClass:"banner-btn"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.openCoverLoad=!0}}},[t._v("Загрузить обложку")]),n("button",{staticClass:"btn btn-primary mt-1",on:{click:function(e){t.openTitleEdit=!0}}},[t._v("Изменить текст")])])]),n("div",{staticClass:"content"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"col-md-4"},[n("input",{staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Найти аккаунт",name:"query"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filter(e)}}})]),n("div",{staticClass:"col-md-8"},[n("button",{staticClass:"btn btn-primary float-right ml-3 mt-1",on:{click:t.openPublic}},[t._v("Открыть публично")]),n("button",{staticClass:"btn btn-primary float-right mt-1",on:{click:function(e){t.openPromptColor=!0,t.colorError=!1}}},[t._v("Изменить цвет фона")])])]),t.loading?n("p",{staticClass:"text-center m-2"},[t._v("Загрузка...")]):t._e(),n("div",{staticClass:"table-responsive mt-4"},[n("table",{staticClass:"table items-tbl"},[t._m(0),n("tbody",t._l(t.list,(function(e,r){return n("tr",{key:e.pos},[n("th",[t._v(t._s(e.pos))]),n("td",[t._v(t._s(e.login))]),n("td",[t._v(t._s(e.commentPoints))]),n("td",[t._v(t._s(e.likePoints))]),n("td",[t._v(t._s(e.otherPoints))]),n("td",[t._v(t._s(e.manualPoints))]),n("td",[t._v(t._s(e.total))]),n("td",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.openAddBonus=r+1}}},[t._v("Добавить")])]),n("td",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.openSubBonus=r+1}}},[t._v("Снять")])])])})),0)])]),n("Pagination",{attrs:{total:t.total,"num-pages":t.numPages,"cur-page":t.curPage,handler:t.open}})],1),t.openCoverLoad||t.openSubBonus||t.openAddBonus||t.openTitleEdit||t.openPromptColor?n("div",{staticClass:"modal-backdrop fade show"}):t._e(),t.openTitleEdit?n("Modal",{attrs:{title:"Изменить заголовок","btn-text":"Изменить","on-close":t.closeModal,"on-change":t.updateTitle}},[n("textarea",{ref:"titleField",staticClass:"form-control mr-3",attrs:{cols:"40",rows:"2"}},[t._v(" "+t._s(t.style.title)+" ")])]):t._e(),t.openAddBonus?n("Modal",{attrs:{title:"Добавить бонус","btn-text":"Добавить","on-close":t.closeModal,"on-change":function(){return t.changeBonus(t.openAddBonus,1*t.$refs.bonus.value)}}},[n("input",{ref:"bonus",staticClass:"form-control mr-3",attrs:{type:"text"},domProps:{value:0}})]):t._e(),t.openSubBonus?n("Modal",{attrs:{title:"Снять бонус","btn-text":"Снять","on-close":t.closeModal,"on-change":function(){return t.changeBonus(t.openAddBonus,-1*t.$refs.bonus.value)}}},[n("input",{ref:"bonus",staticClass:"form-control mr-3",attrs:{type:"text"},domProps:{value:0}})]):t._e(),t.openCoverLoad?n("Modal",{attrs:{title:"Загрузить обложку","btn-text":"Загрузить","on-close":t.closeModal,"on-change":t.uploadCover}},[n("div",{staticClass:"form-group mx-sm-4 mb-2"},[n("input",{ref:"cover",staticClass:"form-control-file",attrs:{type:"file",placeholder:"Файл обложки"}})])]):t._e(),t.openPromptColor?n("Modal",{attrs:{"btn-text":"Изменить",title:"Изменить цвет фона","on-close":t.closeModal,"on-change":t.updateColor}},[n("div",{staticClass:"input-group mr-2"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("#")])]),n("input",{ref:"color",staticClass:"form-control",class:{"is-invalid":t.colorError},attrs:{type:"text"}})])]):t._e()],1)},Et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("#")]),n("th",[t._v("аккаунт")]),n("th",[t._v("коментарии")]),n("th",[t._v("лайки")]),n("th",[t._v("прочие действия")]),n("th",[t._v("баллы вручную")]),n("th",[t._v("всего баллов")]),n("th",[t._v("добавить баллы")]),n("th",[t._v("снять баллы")])])])}],It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade show",style:{display:"block"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),n("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.onClose}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"form-inline"},[n("div",{staticClass:"form-group"},[t._t("default"),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.onChange}},[t._v(t._s(t.btnText))])],2)])])])])])},Mt=[],Dt={name:"Modal",props:["onClose","onChange","title","btnText"]},Ft=Dt,Vt=Object(c["a"])(Ft,It,Mt,!1,null,"3be56694",null),Ut=Vt.exports,qt=10,Kt={name:"Board",components:{Modal:Ut,Pagination:St},mixins:[jt],data:function(){return{style:{},list:[],loading:!0,error:null,id:null,total:0,numPages:0,curPage:0,query:null,openCoverLoad:!1,openPromptColor:!1,openAddBonus:0,openSubBonus:0,openTitleEdit:!1,colorError:!1}},created:function(){var t=this;this.id=parseInt(this.$route.params.id),this.handleResponse((function(){return vt.getBoardStyle(t.id)})).then((function(e){e&&(t.style=e)})),this.open(0)},methods:{open:function(t){var e=this;return this.handleResponse((function(){return vt.getBoardStats(e.id,t,e.query||"")})).then((function(t){t&&(e.list=t.users,e.curPage=t.page,e.numPages=Math.ceil(t.total/qt),e.total=t.total)})),!1},filter:function(t){this.query=t.target.value,this.open(0)},uploadCover:function(){var t=this.$refs.cover.files[0];t&&this.updateStyle({file:t})},updateTitle:function(){this.updateStyle({title:this.$refs.titleField.value})},changeBonus:function(t,e){var n=this;e&&(this.closeModal(),this.handleResponse((function(){return vt.changeBonus(n.id,n.list[t].login,e)})).then((function(t){t&&n.open(n.curPage)})))},closeModal:function(){this.openCoverLoad=!1,this.openPromptColor=!1,this.openTitleEdit=!1,this.openAddBonus=0,this.openSubBonus=0},updateColor:function(){var t=this.$refs.color.value;/[0-9A-F]{6}/i.test(""+t)?this.updateStyle({background:"#"+t}):this.colorError=!0},updateStyle:function(t){var e=this;this.handleResponse((function(){return vt.storeBoardStyle(e.id,t)})).then((function(t){e.closeModal(),t&&(e.style=t)}))},openPublic:function(){this.style.url&&(location.href=this.style.url)}}},Gt=Kt,Wt=(n("2c81"),Object(c["a"])(Gt,Tt,Et,!1,null,"2e192e02",null)),Yt=Wt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root",style:{backgroundColor:t.style.background||"#C4D3DC"}},[n("div",{staticClass:"banner",style:{backgroundImage:t.style.banner&&"url("+t.style.banner+")"}},[t.style.title?n("p",{staticClass:"title"},[t._v(t._s(t.style.title))]):t._e()]),n("div",{staticClass:"content"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"col-md-4"},[n("input",{staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Найти аккаунт",name:"query"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filter(e)}}})])]),t.loading?n("p",{staticClass:"text-center m-2"},[t._v("Загрузка...")]):t._e(),n("div",{staticClass:"table-responsive mt-4"},[n("table",{staticClass:"table items-tbl"},[t._m(0),n("tbody",t._l(t.list,(function(e){return n("tr",{key:e.pos},[n("th",[t._v(t._s(e.pos))]),n("td",[t._v(t._s(e.login))]),n("td",[t._v(t._s(e.commentPoints))]),n("td",[t._v(t._s(e.likePoints))]),n("td",[t._v(t._s(e.otherPoints))]),n("td",[t._v(t._s(e.total))])])})),0)])]),n("Pagination",{attrs:{total:t.total,"num-pages":t.numPages,"cur-page":t.curPage,handler:t.loadPage}})],1)])},Jt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("#")]),n("th",[t._v("аккаунт")]),n("th",[t._v("коментарии")]),n("th",[t._v("лайки")]),n("th",[t._v("прочие действия")]),n("th",[t._v("баллы")])])])}],Ht={name:"PublicBoardView",components:{Pagination:St},mixins:[jt],data:function(){return{style:{},list:[],loading:!0,error:null,code:null,total:0,numPages:0,curPage:0,query:null}},created:function(){var t=this;this.code=this.$route.params.code,this.handleResponse((function(){return vt.getPublicStyle(t.code)})).then((function(e){e&&(t.style=e)})),this.loadPage(0)},methods:{filter:function(){this.loadPage(0)},loadPage:function(t){var e=this;return this.handleResponse((function(){return vt.getPublicStat(e.code,e.query,t)})).then((function(t){t&&(e.list=t.users,e.curPage=t.page,e.numPages=Math.ceil(t.total/t.size),e.total=t.total)})),!1}}},Qt=Ht,Xt=(n("1318"),Object(c["a"])(Qt,zt,Jt,!1,null,"2e2272f2",null)),Zt=Xt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},ee=[],ne={name:"AdminUsersView"},re=ne,oe=Object(c["a"])(re,te,ee,!1,null,"58f5d634",null),ie=oe.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("Admin Boards")])},se=[],ce={name:"AdminBoardsView"},le=ce,ue=Object(c["a"])(le,ae,se,!1,null,"4a929036",null),de=ue.exports,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("h2",[t._v("Настройте лидерборд")]),t.loading?n("p",{staticClass:"text-center mt-3"},[t._v("Загрузка...")]):t._e(),t.error?n("p",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),n("h5",[t._v("Страница")]),t._l(t.fields.page,(function(e){return n("BoardConfigField",{key:e.id,attrs:{binding:t.$v.item[e.id],code:e.id,title:e.title}})})),n("h5",[t._v("Действия пользователя")]),t._l(t.fields.actions,(function(e){return n("BoardConfigField",{key:e.id,attrs:{binding:t.$v.item[e.id],code:e.id,title:e.title}})})),n("div",{staticClass:"form-group row"},[n("div",{staticClass:"col-sm-8"},[t._v("Учитывать только подписчиков ")]),n("div",{staticClass:"col-sm-4"},[n("VueToggles",{attrs:{width:"70",height:"35","checked-text":"Да","unchecked-text":"Нет"},on:{click:function(e){t.item.onlySubscribers=!t.item.onlySubscribers}},model:{value:t.item.onlySubscribers,callback:function(e){t.$set(t.item,"onlySubscribers",e)},expression:"item.onlySubscribers"}})],1)]),n("h5",[t._v("Обратная связь")]),t._l(t.fields.feedback,(function(e){return n("BoardConfigField",{key:e.id,attrs:{binding:t.$v.item[e.id],code:e.id,title:e.title}})})),n("h5",[t._v("Прочее")]),n("div",{staticClass:"form-group row"},[n("div",{staticClass:"col-sm-8"},[t._v("Активировать/Заморозить сбор данных")]),n("div",{staticClass:"col-sm-4"},[n("VueToggles",{attrs:{width:"130",height:"35","checked-text":"Активно","unchecked-text":"Выключено"},on:{click:function(e){t.item.processingActive=!t.item.processingActive}},model:{value:t.item.processingActive,callback:function(e){t.$set(t.item,"processingActive",e)},expression:"item.processingActive"}})],1)]),n("div",{staticClass:"form-group row"},[n("div",{staticClass:"col-sm-8"},[t._v("Показывать количество действий на лидерборде")]),n("div",{staticClass:"col-sm-4"},[n("VueToggles",{attrs:{width:"70",height:"35","checked-text":"Да","unchecked-text":"Нет"},on:{click:function(e){t.item.showActionCount=!t.item.showActionCount}},model:{value:t.item.showActionCount,callback:function(e){t.$set(t.item,"showActionCount",e)},expression:"item.showActionCount"}})],1)]),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-8 col-form-label"},[t._v("Необратимо сбросить ручные баллы")]),n("div",{staticClass:"col-sm-4"},[n("button",{staticClass:"btn btn-danger btn-block",on:{click:t.resetManual}},[t._v("Сбросить")])])]),n("div",{staticClass:"row save-btn"},[n("div",{staticClass:"col-sm-12 text-center"},[n("button",{staticClass:"btn btn-primary btn-block mb-3",attrs:{disabled:t.$v.item.$anyError},on:{click:t.store}},[t._v("Сохранить")]),n("router-link",{attrs:{to:"/cp/boards"}},[n("small",[t._v("Назад")])])],1)])],2)},me=[],fe=(n("d81d"),n("13d5"),n("ade3")),he=n("2909"),ge=n("b5ae"),be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-8 col-form-label",attrs:{for:t.code}},[t._v(t._s(t.title))]),n("div",{staticClass:"col-sm-4"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.binding.$model,expression:"binding.$model",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.binding.$error},attrs:{type:"text",id:t.code,autocomplete:"off"},domProps:{value:t.binding.$model},on:{input:function(e){e.target.composing||t.$set(t.binding,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])},ve=[],_e={name:"BoardConfigField",props:["binding","title","code"]},ye=_e,Ce=Object(c["a"])(ye,be,ve,!1,null,"6e96f284",null),Pe=Ce.exports,ke={name:"@account",postDepth:20,likePoints:3,commentPoints:5,commentMinLength:10,maxCommentsFromUser:5,commentReplyPoints:1,commentReplyMinLength:10,maxCommentRepliesFromUser:10,commentLikePoints:1,onlySubscribers:!0,deepReplySubscriberPoints:10,deepReplyNonSubscriberPoints:5,maxDeepRepliesFromUser:3,deepLikeSubscriberPoints:10,deepLikeNonSubscriberPoints:3,processingActive:!0,showActionCount:!0},xe={page:[{id:"name",title:"Название страницы"},{id:"postDepth",title:"Количество последних постов для рейтинга"}],actions:[{id:"likePoints",title:"Баллы за лайки к постам страницы"},{id:"commentPoints",title:"Баллы за комментарии к постам страницы"},{id:"commentMinLength",title:"Минимальная длина комментария"},{id:"maxCommentsFromUser",title:"Максимум комментариев от одного пользователя"},{id:"commentReplyPoints",title:"Баллы за ответы на чужие комментарии"},{id:"commentReplyMinLength",title:"Минимальная длина ответа на чужой комментарий"},{id:"maxCommentRepliesFromUser",title:"Максимум ответов на чужие комментарии"},{id:"commentLikePoints",title:"Баллы за лайки чужим комментариям"}],feedback:[{id:"deepReplySubscriberPoints",title:"Баллы за ответы на комментарии от подписчиков"},{id:"deepReplyNonSubscriberPoints",title:"Баллы за ответы на комментарии не от подписчиков"},{id:"maxDeepRepliesFromUser",title:"Максимум ответов на комментарий от одного пользователя"},{id:"deepLikeSubscriberPoints",title:"Баллы за лайки на комментарии от подписчиков"},{id:"deepLikeNonSubscriberPoints",title:"Баллы за лайки на комментарии не от подписчиков"}]},we=[].concat(Object(he["a"])(xe.page),Object(he["a"])(xe.actions),Object(he["a"])(xe.feedback)).map((function(t){var e=t.id;return e})).reduce((function(t,e){return Object(G["a"])(Object(G["a"])({},t),{},Object(fe["a"])({},e,{required:ge["required"],integer:ge["integer"],minValue:Object(ge["minValue"])(0)}))}),{});we.name={required:ge["required"],minLength:Object(ge["minLength"])(5)};var Oe={name:"BoardConfig",components:{BoardConfigField:Pe},mixins:[],data:function(){return{loading:!1,error:null,item:{},fields:xe,isNew:!1}},validations:{item:we},created:function(){var t=this;if(this.loading=!0,this.error=null,"new"===this.$route.params.id)this.isNew=!0,this.loading=!1,this.item=ke;else{var e=parseInt(this.$route.params.id);this.handleResponse((function(){return vt.getBoardConfig(e)})).then((function(e){e&&(t.item=e)}))}},methods:{store:function(){var t=this;this.loading||this.$v.item.$invalid||this.handleResponse((function(){return vt.storeBoard(t.item)})).then((function(e){e&&t.$router.push("/cp/boards")}))},resetManual:function(){var t=this;this.item.id&&!this.loading&&this.handleResponse((function(){return vt.resetManualPoints(t.item.id)}))},handleResponse:function(t){var e=this;return this.error=null,this.loading=!0,t().catch((function(t){switch(t.message){case y.TOKEN_INVALID:e.$router.push("/login");break;case y.ENTITY_NOT_FOUND:e.$router.push("/cp/boards");break;default:e.error="Произошла ошибка. Повторите запрос позже"}return null})).finally((function(){e.loading=!1}))}}},Re=Oe,Se=(n("1203"),Object(c["a"])(Re,pe,me,!1,null,"906c78ee",null)),je=Se.exports,Ae=[{path:"/login",component:U,name:"login",alias:"/"},{path:"/cp/boards",component:Nt,name:"home"},{path:"/cp/boards/:id",component:Yt},{path:"/cp/boards/:id/config",component:je},{path:"/admin/users",component:ie},{path:"/admin/users/:id/boards",component:de},{path:"/:code",component:Zt,name:"public-board"}],$e=Ae,Be=n("4dcf"),Le=n("1dce");r["a"].config.productionTip=!1,r["a"].use(d["a"]),r["a"].component("VueToggles",Be["a"]),r["a"].use(Le["Vuelidate"]);var Ne=new d["a"]({routes:$e});Ne.beforeEach((function(t,e,n){M.isLogged()||"login"===t.name||"public-board"===t.name?n():M.tryLogin().then((function(t){t?n():n("/login")}))})),new r["a"]({render:function(t){return t(u)},router:Ne}).$mount("#app")},6965:function(t,e,n){},"85ec":function(t,e,n){},ace1:function(t,e,n){},b989:function(t,e,n){},bfa6:function(t,e,n){"use strict";var r=n("b989"),o=n.n(r);o.a},e008:function(t,e,n){},e0ed:function(t,e,n){"use strict";var r=n("009a"),o=n.n(r);o.a},e5bb:function(t,e,n){},f265:function(t,e,n){}});
//# sourceMappingURL=app.05c6a255.js.map